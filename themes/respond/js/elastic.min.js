(function(f){f.fn.extend({elastic:function(){var g="paddingTop paddingRight paddingBottom paddingLeft fontSize lineHeight fontFamily width fontWeight".split(" ");return this.each(function(){function h(b,c){curratedHeight=Math.floor(parseInt(b,10));a.height()!=curratedHeight&&a.css({height:curratedHeight+"px",overflow:c})}function k(){var b=a.val().replace(/&/g,"&amp;").replace(/\t/g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),d=c.html();b+"&nbsp;"!=d&&(c.html(b+"&nbsp;"),3<Math.abs(c.height()+
l-a.height())&&(b=c.height()+l,b>=e?h(e,"auto"):b<=m?h(m,"hidden"):h(b,"hidden")))}if("textarea"!=this.type)return!1;var a=f(this),c=f("<div />").css({position:"absolute",display:"none","word-wrap":"break-word"}),l=parseInt(a.css("line-height"),10)||parseInt(a.css("font-size"),"10"),m=parseInt(a.css("height"),10)||3*l,e=parseInt(a.css("max-height"),10)||Number.MAX_VALUE,d=0;0>e&&(e=Number.MAX_VALUE);c.appendTo(a.parent());for(d=g.length;d--;)c.css(g[d].toString(),a.css(g[d].toString()));a.css({overflow:"hidden"});
a.keyup(function(){k()});a.on("input paste",function(a){setTimeout(k,250)});k()})}})})(jQuery);